`jdeps`コマンドは、Javaの依存関係を分析するツールで、特定のクラスやパッケージ、モジュールが他のクラス、パッケージ、モジュールに対してどのような依存関係を持っているかを調査するために使用されます。Java 8で導入され、Java 9以降ではモジュールシステムに対応する形で機能が拡張されています。

### 基本的な使い方

```bash
jdeps <オプション> <JARファイルまたはクラスファイル>
```

- `<オプション>`: 依存関係の表示方法や出力の詳細度を制御します。
- `<JARファイルまたはクラスファイル>`: 依存関係を調査したいJARファイル、クラスファイル、またはモジュールを指定します。

### 主な用途

1. **クラスやパッケージの依存関係分析**:
   - 指定されたJARファイルやクラスファイルが、どの他のクラスやパッケージに依存しているかを表示します。
  
2. **モジュールの依存関係分析**:
   - Java 9以降では、モジュール間の依存関係を分析するために`jdeps`を使用できます。

3. **移行サポート**:
   - Java 8以前のコードをモジュール化する際に、依存関係を明確にしてモジュールへの移行を容易にします。

### 基本的なコマンド例

#### 1. JARファイルの依存関係を表示

```bash
jdeps myapp.jar
```

このコマンドは、`myapp.jar`の依存関係を分析し、どのパッケージやクラスが他のどのパッケージやクラスに依存しているかを一覧表示します。

#### 2. パッケージレベルの依存関係を表示

```bash
jdeps -p myapp.jar
```

`-p`オプションを使用すると、依存関係がパッケージレベルで表示されます。パッケージごとの依存関係を把握するのに便利です。

#### 3. クラスレベルの依存関係を表示

```bash
jdeps -v myapp.jar
```

`-v`（verbose: 詳細表示）オプションを使うことで、依存関係がクラスレベルで表示されます。より詳細な依存関係の情報を得たい場合に役立ちます。

#### 4. モジュールレベルの依存関係を表示

Java 9以降では、モジュールレベルの依存関係も分析できます。

```bash
jdeps --module-path mods -s --module com.example.app
```

- `--module-path mods`: モジュールが格納されているパスを指定。
- `-s`: 簡潔な（summary）出力を表示。
- `--module com.example.app`: 分析対象のモジュールを指定。

このコマンドは、`com.example.app`モジュールがどのモジュールに依存しているかを表示します。

#### 5. JDKの内部APIの使用をチェック

Java 9以降でモジュールシステムを導入する際、JDKの内部API（`sun.*`など）を使用しているコードがあると、互換性の問題が生じる可能性があります。`jdeps`を使うことで、これを検出できます。

```bash
jdeps --jdk-internals myapp.jar
```

このコマンドは、`myapp.jar`がJDKの内部APIを使用しているかどうかを表示します。移行時に役立ちます。

### よく使われるオプション

- `-v`, `--verbose`: クラスレベルの詳細な依存関係を表示します。
- `-p`, `--package`: パッケージレベルの依存関係を表示します。
- `-s`, `--summary`: 簡潔な依存関係のサマリーを表示します。
- `--module`: 指定したモジュールの依存関係を分析します。
- `--module-path`: モジュールが配置されているディレクトリを指定します。
- `--jdk-internals`: JDK内部APIの使用を調査します。

### jdeps の出力例

例えば、`jdeps myapp.jar`を実行した場合、次のような出力が得られます。

```bash
myapp.jar -> java.base
   com.example.app.Main -> java.util.List
   com.example.app.Main -> java.io.File
```

この出力では、`myapp.jar`の`com.example.app.Main`クラスが`java.util.List`と`java.io.File`に依存していることが示されています。また、このJARファイル全体が`java.base`モジュールに依存していることがわかります。

### まとめ

`jdeps`は、以下のような目的で非常に便利なツールです。
- JARファイルやクラスファイルの依存関係を可視化する。
- モジュール間の依存関係を分析する。
- Javaのモジュールシステムへの移行を支援する。
- JDK内部APIの使用を検出し、モジュール化への問題点を洗い出す。

モジュールシステムの理解や依存関係の整理に役立つため、特にJava 9以降でモジュールを使うプロジェクトには重要なツールです。
