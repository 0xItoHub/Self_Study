`DELETE FROM` と `IN` 演算子を組み合わせることで、特定の条件に合致する行を削除するSQLクエリを作成することができます。`IN` 演算子は、`WHERE` 句で使用して、指定したリストやサブクエリの結果と一致する値を持つ行をフィルタリングします。

### 基本構文

```sql
DELETE FROM テーブル名
WHERE 列名 IN (値1, 値2, 値3, ...);
```

または、サブクエリを使用して別のテーブルから条件を取得することもできます。

```sql
DELETE FROM テーブル名
WHERE 列名 IN (SELECT 列名 FROM 別のテーブル WHERE 条件);
```

### 例1: 特定の値のリストに基づいて削除する

例えば、`customer_id` が `1`, `2`, `3` の顧客を `customers` テーブルから削除したい場合、以下のクエリを使用します。

```sql
DELETE FROM customers
WHERE customer_id IN (1, 2, 3);
```

このクエリは、`customer_id` が `1`, `2`, `3` の顧客の行を `customers` テーブルから削除します。

### 例2: サブクエリを使用して削除する

別のテーブルの条件に基づいて削除する場合、`IN` 演算子をサブクエリと組み合わせて使用します。例えば、`opt_out_customers` テーブルに存在する `customer_id` を持つ顧客を `customers` テーブルから削除する場合、以下のように書けます。

```sql
DELETE FROM customers
WHERE customer_id IN (SELECT customer_id FROM opt_out_customers);
```

このクエリは、`opt_out_customers` テーブルに存在する `customer_id` を持つ行を `customers` テーブルから削除します。

### 注意点

1. **パフォーマンス**: `IN` 演算子を使う場合、特にリストが大きい場合やサブクエリを使用する場合、パフォーマンスに影響が出ることがあります。多くのデータベースでは、`IN` よりも `JOIN` を使う方が効率的なことがあります。

2. **削除の範囲**: `IN` 演算子によって一致する行が複数ある場合、そのすべてが削除されるため、削除の範囲を正確に理解している必要があります。

3. **サブクエリの適切な使用**: サブクエリを使う場合、返されるデータの型や範囲が削除対象の列と一致していることを確認する必要があります。さもないとエラーが発生する可能性があります。

### まとめ

- `DELETE FROM ... WHERE ... IN ...` は、リストやサブクエリの結果に基づいて複数の行を削除するための便利な方法です。
- リストを直接指定する場合も、サブクエリで動的に条件を取得する場合も、`IN` 演算子を使って簡潔な削除クエリを作成することができます。
- `IN` を使用する場合は、パフォーマンスと条件の正確さに注意しましょう。
