**セッションが異常終了したとき**は、通常、トランザクションは**コミットされません**。むしろ、未コミットのトランザクションは**ロールバック**され、データベースはトランザクションが開始される前の状態に戻されます。

### 詳細な解説

#### 異常終了とは
セッションの異常終了とは、クライアントがデータベースとの接続を予期せず切断した場合を指します。これには以下のようなケースが含まれます：
- ネットワークの切断
- データベースサーバーやクライアントのクラッシュ
- クライアントアプリケーションの強制終了
- データベースサーバーの異常停止（例：サーバーがクラッシュした場合）

#### トランザクションのロールバック
異常終了時には、セッション内で実行されていた未コミットのトランザクションは自動的にロールバックされます。これにより、データベースは未確定の変更を破棄し、データの整合性を保ちます。つまり、セッションが異常終了した場合、**コミットされていない変更はすべて取り消される**のが通常の動作です。

#### コミットのタイミング
トランザクションが**コミットされるタイミング**は、以下のような場合に限られます：
- 明示的に`COMMIT`文が実行されたとき
- 自動コミットが有効になっている場合で、SQL操作が成功したとき（この場合も、セッションが正常に終了することが前提です）

しかし、セッションが異常終了した場合には、明示的なコミットも自動コミットも行われないため、未確定のトランザクションは取り消されることになります。

### 例
1. **正常な動作**
   ```sql
   START TRANSACTION;
   UPDATE accounts SET balance = balance - 100 WHERE account_number = 123456;
   COMMIT;
   ```
   この場合、`COMMIT`文が実行されると、トランザクションは確定され、データベースに変更が反映されます。セッションがその後終了しても、変更は保持されます。

2. **異常終了**
   ```sql
   START TRANSACTION;
   UPDATE accounts SET balance = balance - 100 WHERE account_number = 123456;
   -- ネットワークが切断されるなどしてセッションが異常終了
   ```
   この場合、`COMMIT`が実行されていないため、トランザクションはロールバックされます。データベースは変更前の状態に戻され、変更は反映されません。

### まとめ
- セッションが異常終了した場合、**コミットされていないトランザクションはロールバックされます**。
- これにより、データベースは異常終了前の一貫した状態を保ち、データの破損や不整合を防ぎます。
